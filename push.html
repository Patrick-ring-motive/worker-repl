<link rel="manifest" href="/manifest.json"></link>
<script src="https://cdn.jsdelivr.net/npm/core-js-bundle/index.js"></script>
<script type="module">
  const registration = await navigator.serviceWorker.ready;
  const serviceWorkerRegistration = await navigator.serviceWorker.register("push.js");
  const subscription = await serviceWorkerRegistration.pushManager.subscribe({
    userVisibleOnly: true,
    applicationServerKey: Uint8Array.fromBase64('BHFL0Kba4iL2brnJ1HRVXUxpl_jT5zM5G6PJo5k8M7zBou3ysd00noQwqQApKQVDzz7_GxmWbAozsvGh0xeCXM0')
  });
  let payload = "test";
  fetch('https://wix-or-cloudflare-endpoint.com/send', {
    method: 'POST',
    body: JSON.stringify({subscription, payload})
  });
  console.log(pushSubscription.subscriptionId);
  console.log(pushSubscription.endpoint);
</script>
